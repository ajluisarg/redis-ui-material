<p3xr-key-pager p3xr-controller="$ctrl"></p3xr-key-pager>

<div layout-gt-xs="row" layout="column" layout-align-gt-sm="start center" layout-align="center center" md-colors="{ background: 'primary-300' }">
    <div flex="20">
        <span ng-if="!$root.$mdMedia('xs')">&nbsp;</span>
        {{ $root.p3xr.strings.page.key.list.table.index }}
    </div>
    <div flex="60">
        {{ $root.p3xr.strings.page.key.list.table.value }}
    </div>
    <div flex="20" style="text-align: right" class="p3xr-connected-readonly-filler">
        <md-button class="md-icon-button " ng-click="$ctrl.appendValue({ $event: $event})" ng-if="$root.p3xr.state.connection.readonly !== true">
            <md-tooltip>{{ $root.p3xr.strings.intention.add }}</md-tooltip>
            <md-icon>add</md-icon>
        </md-button>
    </div>
</div>

<div layout-gt-xs="row" layout="column" layout-align-gt-sm="start start" layout-align="center center" ng-repeat="value in $ctrl.pageBasedList() track by $index"
     ng-class="{ 'p3xr-list-key-odd-item': $odd }" class="p3xr-list-key-item">
    <div flex="20" ng-click="$ctrl.editValue({ index: $index, value: value, $event: $event})">
        <span ng-if="!$root.$mdMedia('xs')">&nbsp;</span>
        {{ $index + ($ctrl.pages * ($ctrl.page -1) ) }}
    </div>
    <div flex="60" style="overflow: auto;align-items: flex-start; max-height: 200px;" ng-click="$ctrl.editValue({ index: $index, value: value, $event: $event})">
        <span class="p3xr-pre" ng-if="$root.p3xr.settings.maxValueDisplay > 0 && value.length > $root.p3xr.settings.maxValueDisplay">{{ value.substring(0, $root.p3xr.settings.maxValueDisplay) }}...</span>
        <span class="p3xr-pre" ng-if="$root.p3xr.settings.maxValueDisplay === 0 || value.length <= $root.p3xr.settings.maxValueDisplay|| $root.p3xr.settings.maxValueDisplay === -1 ">{{ value }}</span>
    </div>
    <div flex="20" style="text-align: right; ">

        <md-button class="md-icon-button md-warn" ng-click="$ctrl.deleteListElement({ index: $index, $event: $event})" ng-if="$root.p3xr.state.connection.readonly !== true">
            <md-tooltip>{{ $root.p3xr.strings.intention.delete }}</md-tooltip>
            <md-icon>delete</md-icon>
        </md-button>

        <md-button class="md-icon-button md-accent" ng-click="$ctrl.showJson({ value: value})">
            <md-tooltip>{{ $root.p3xr.strings.intention.jsonViewShow }}</md-tooltip>
            <md-icon>table_chart</md-icon>
        </md-button>

        <md-button class="md-icon-button md-accent" ng-click="$ctrl.copy({ $event: $event, value: value})" >
            <md-tooltip>{{ $root.p3xr.strings.intention.copy }}</md-tooltip>
            <md-icon>content_copy</md-icon>
        </md-button>

        <md-button class="md-icon-button md-primary"
                   ng-click="$ctrl.editValue({ index: $index, value: value, $event: $event})">
            <md-tooltip>{{ $root.p3xr.strings.intention.edit }}</md-tooltip>
            <md-icon>edit</md-icon>
        </md-button>


    </div>
</div>

